(()=>{"use strict";function e(e,t,c,n,o=!1){return{title:e,description:t,dueDate:c,priority:n,isDone:o}}(()=>{let t=new Array,c=[e("Home Work","2022-03-08","low")];const n=document.getElementById("add-button"),o=document.querySelector(".cancel-button"),i=document.querySelector(".submit"),a=document.getElementById("overlay"),r=document.querySelector(".low"),d=document.querySelector(".medium"),u=document.querySelector(".high"),l=document.querySelector("span.error"),s=document.querySelector("[data-title]"),m=document.querySelector("[data-about]"),v=document.getElementById("due-date"),y=document.querySelector(".add-project-button"),h=document.querySelector("#add-project"),p=document.querySelector("#cancel-project"),E=document.querySelector(".projects"),f=document.getElementById("project"),g=document.querySelector(".sidebar"),k=document.querySelector(".title-error");function L(e){const n=document.querySelector(".task-items");for(let o=0;o<e.length;o++){e[o].id="task"+o;const i=document.createElement("div");x(i,"item"),"low"==e[o].priority&&x(i,"low-prio"),"medium"==e[o].priority&&x(i,"mid-prio"),"high"==e[o].priority&&x(i,"high-prio"),P(n,i);const a=document.createElement("div");P(i,a);const r=document.createElement("input");r.setAttribute("type","checkbox"),r.setAttribute("id","checkbox");const d=document.createElement("div");x(d,"task-header"),D(d,e[o].title);const u=document.createElement("button");x(u,"delete-button"),u.innerHTML="&times;",P(a,r),P(a,d),P(a,u);const l=document.createElement("div");x(l,"thin-line"),P(i,l);const s=document.createElement("div");x(s,"task-info"),D(s,e[o].description),P(i,s);const m=document.createElement("div");x(m,"thin-line"),P(i,m);const v=document.createElement("div");x(v,"task-status"),P(i,v);const y=document.createElement("input");y.setAttribute("type","date"),y.setAttribute("name","date"),y.setAttribute("id","date"),y.value=e[o].dueDate,P(v,y),u.addEventListener("click",(()=>{i.remove(),console.log(t),console.log(c),t=t.filter((e=>{if(e.id!==t[o].id)return!0}))}))}}function S(){x(r,"active"),C(d,"active"),C(u,"active"),C(l,"active")}function q(){x(d,"active"),C(r,"active"),C(u,"active"),C(l,"active")}function b(){x(u,"active"),C(d,"active"),C(r,"active"),C(l,"active")}function w(){C(r,"active"),C(d,"active"),C(u,"active"),C(l,"active"),N(m,""),N(s,""),N(v,""),x(document.querySelector("div.form"),"active"),x(a,"active")}function A(){C(document.querySelector("div.form"),"active"),C(a,"active")}function I(){if(""==f.value)return x(k,"active"),H(k,"Please choose a project title"),x(h,"active"),void x(p,"active");x(E,"hide"),C(y,"hide"),function(){const e=document.createElement("img"),t=document.createElement("img");t.src="Images/close-circle-outline.svg",e.src="Images/format-list-checks.svg";const c=document.createElement("span");D(c,f.value);const n=document.createElement("div");P(n,e),P(n,c),P(n,t),x(n,"a-project"),P(g,n)}()}function j(){x(E,"hide"),C(y,"hide")}function B(){N(f,""),x(y,"hide"),C(E,"hide"),C(h,"active"),C(p,"active"),C(k,"active")}function x(e,t){e.classList.add(t)}function C(e,t){e.classList.remove(t)}function H(e,t){e.textContent=t}function N(e,t){e.value=t}function P(e,t){e.append(t)}function D(e,t){e.textContent=t}return{loadHomePage:function(){n.addEventListener("click",w),a.addEventListener("click",A),o.addEventListener("click",A),i.addEventListener("click",(()=>(console.log(t),console.log(c),function(e){const t=document.getElementsByClassName("item");for(;t.length>0;)t[0].parentNode.removeChild(t[0])}(),""==s.value||""==v.value?alert("Task Title is empty or you havent chose the due date"):r.classList.contains("active")||d.classList.contains("active")||u.classList.contains("active")?r.classList.contains("active")?(t.push(e(s.value,m.value,v.value,"low")),A(),L(t)):d.classList.contains("active")?(t.push(e(s.value,m.value,v.value,"medium")),A(),L(t)):u.classList.contains("active")?(t.push(e(s.value,m.value,v.value,"high")),A(),L(t)):void 0:(x(l,"active"),H(l,"Please choose a priority"))))),y.addEventListener("click",B),p.addEventListener("click",j),h.addEventListener("click",I),r.addEventListener("click",S),d.addEventListener("click",q),u.addEventListener("click",b),console.log((window.addEventListener("beforeunload",(()=>{localStorage.setItem("myArray",JSON.stringify(t))})),c=localStorage.getItem("myArray"),c=JSON.parse(c),c)),L(t)}}})().loadHomePage()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxLQUFLQyxVQUFVOUYsT0FHakRFLEVBQVV5RixhQUFhSSxRQUFRLFdBQy9CN0YsRUFBVTJGLEtBQUtHLE1BQU05RixHQUNkQSxJQXhIUHNCLEVBQWF4QixNQTVCTixHQ0RSZ0YsZ0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvTW9kdWxlcy9UYXNrLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9Nb2R1bGVzL3BvcC11cC1mb3JtLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiB0YXNrKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIGlzRG9uZSA9IGZhbHNlKSB7XG4gIHJldHVybiB7XG4gICAgdGl0bGUsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgZHVlRGF0ZSxcbiAgICBwcmlvcml0eSxcbiAgICBpc0RvbmUsXG4gIH07XG59XG5cbmV4cG9ydCB7IHRhc2sgfTtcbiIsImltcG9ydCB7IHRhc2sgfSBmcm9tIFwiLi9UYXNrXCI7XG5cbmNvbnN0IFVJID0gKCgpID0+IHtcbiAgbGV0IHRhc2tBcnJheSA9IG5ldyBBcnJheSgpO1xuICBsZXQgbXlBcnJheSA9IFt0YXNrKFwiSG9tZSBXb3JrXCIsIFwiMjAyMi0wMy0wOFwiLCBcImxvd1wiKV07XG4gIGNvbnN0IGFkZFRhc2tCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1idXR0b25cIik7XG4gIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsLWJ1dHRvblwiKTtcbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdWJtaXRcIik7XG4gIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm92ZXJsYXlcIik7XG4gIGNvbnN0IGxvd1ByaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxvd1wiKTtcbiAgY29uc3QgbWVkaXVtUHJpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVkaXVtXCIpO1xuICBjb25zdCBoaWdoUHJpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGlnaFwiKTtcbiAgY29uc3QgcHJpb0Vycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInNwYW4uZXJyb3JcIik7XG4gIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS10aXRsZV1cIik7XG4gIGNvbnN0IHRhc2tBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1hYm91dF1cIik7XG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1ZS1kYXRlXCIpO1xuICBjb25zdCBhZGRQcm9qZWN0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtcHJvamVjdC1idXR0b25cIik7XG4gIGNvbnN0IGFkZFByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1wcm9qZWN0XCIpO1xuICBjb25zdCBjYW5jZWxQcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYW5jZWwtcHJvamVjdFwiKTtcbiAgY29uc3QgcHJvamVjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzXCIpO1xuICBjb25zdCBwcm9qZWN0VGl0bGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdFwiKTtcbiAgY29uc3Qgc2lkZUJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2lkZWJhclwiKTtcbiAgY29uc3QgdGl0bGVFcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGl0bGUtZXJyb3JcIik7XG5cbiAgZnVuY3Rpb24gbG9hZEhvbWVQYWdlKCkge1xuICAgIGFkZFRhc2soKTtcbiAgICBjbG9zZVRhc2tGb3JtKCk7XG4gICAgYWRkUHJvamVjdEZvcm0oKTtcbiAgICBwcmlvQnV0dG9ucygpO1xuICAgIGNvbnNvbGUubG9nKHN0b3JlZFRhc2tzKCkpO1xuICAgIGRpc3BsYXlUYXNrcyh0YXNrQXJyYXkpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkVGFzaygpIHtcbiAgICBhZGRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuRm9ybSk7XG4gIH1cblxuICBmdW5jdGlvbiBjbG9zZVRhc2tGb3JtKCkge1xuICAgIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlRm9ybSk7XG4gICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZUZvcm0pO1xuICAgIHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2codGFza0FycmF5KTtcbiAgICAgIGNvbnNvbGUubG9nKG15QXJyYXkpO1xuICAgICAgLy8gaWYgKCF0YXNrQXJyYXkubGVuZ3RoKSB0YXNrQXJyYXkgPSB0YXNrQXJyYXkuY29uY2F0KG15QXJyYXkpO1xuICAgICAgLy9yZW1vdmluZyBlbGVtZW50cyBzbyB0aGV5IGRvbnQgZHVwbGljYXRlXG4gICAgICByZW1vdmVFbGVtZW50c0J5Q2xhc3MoXCJpdGVtXCIpO1xuXG4gICAgICAvLyAgICAgSW5wdXQgRXJyb3JcblxuICAgICAgaWYgKHRhc2tUaXRsZS52YWx1ZSA9PSBcIlwiIHx8IGRhdGUudmFsdWUgPT0gXCJcIilcbiAgICAgICAgcmV0dXJuIGFsZXJ0KFwiVGFzayBUaXRsZSBpcyBlbXB0eSBvciB5b3UgaGF2ZW50IGNob3NlIHRoZSBkdWUgZGF0ZVwiKTtcblxuICAgICAgLy8gICAgIFByaW9yaXR5IEVycm9yXG5cbiAgICAgIGlmIChcbiAgICAgICAgIWxvd1ByaW8uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpICYmXG4gICAgICAgICFtZWRpdW1QcmlvLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSAmJlxuICAgICAgICAhaGlnaFByaW8uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpXG4gICAgICApIHtcbiAgICAgICAgYWRkQ2xhc3MocHJpb0Vycm9yLCBcImFjdGl2ZVwiKTtcbiAgICAgICAgcmV0dXJuIHNob3dFcnJvcihwcmlvRXJyb3IsIFwiUGxlYXNlIGNob29zZSBhIHByaW9yaXR5XCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAobG93UHJpby5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcbiAgICAgICAgdGFza0FycmF5LnB1c2goXG4gICAgICAgICAgdGFzayh0YXNrVGl0bGUudmFsdWUsIHRhc2tBYm91dC52YWx1ZSwgZGF0ZS52YWx1ZSwgXCJsb3dcIilcbiAgICAgICAgKTtcbiAgICAgICAgY2xvc2VGb3JtKCk7XG4gICAgICAgIHJldHVybiBkaXNwbGF5VGFza3ModGFza0FycmF5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGl1bVByaW8uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XG4gICAgICAgIHRhc2tBcnJheS5wdXNoKFxuICAgICAgICAgIHRhc2sodGFza1RpdGxlLnZhbHVlLCB0YXNrQWJvdXQudmFsdWUsIGRhdGUudmFsdWUsIFwibWVkaXVtXCIpXG4gICAgICAgICk7XG4gICAgICAgIGNsb3NlRm9ybSgpO1xuICAgICAgICByZXR1cm4gZGlzcGxheVRhc2tzKHRhc2tBcnJheSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChoaWdoUHJpby5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcbiAgICAgICAgdGFza0FycmF5LnB1c2goXG4gICAgICAgICAgdGFzayh0YXNrVGl0bGUudmFsdWUsIHRhc2tBYm91dC52YWx1ZSwgZGF0ZS52YWx1ZSwgXCJoaWdoXCIpXG4gICAgICAgICk7XG4gICAgICAgIGNsb3NlRm9ybSgpO1xuICAgICAgICByZXR1cm4gZGlzcGxheVRhc2tzKHRhc2tBcnJheSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBkaXNwbGF5VGFza3MoYXJyYXkpIHtcbiAgICBjb25zdCB0YXNrSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2staXRlbXNcIik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgYXJyYXlbaV0uaWQgPSBcInRhc2tcIiArIGk7XG4gICAgICBjb25zdCBpdGVtRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGFkZENsYXNzKGl0ZW1EaXYsIFwiaXRlbVwiKTtcbiAgICAgIGlmIChhcnJheVtpXS5wcmlvcml0eSA9PSBcImxvd1wiKSBhZGRDbGFzcyhpdGVtRGl2LCBcImxvdy1wcmlvXCIpO1xuICAgICAgaWYgKGFycmF5W2ldLnByaW9yaXR5ID09IFwibWVkaXVtXCIpIGFkZENsYXNzKGl0ZW1EaXYsIFwibWlkLXByaW9cIik7XG4gICAgICBpZiAoYXJyYXlbaV0ucHJpb3JpdHkgPT0gXCJoaWdoXCIpIGFkZENsYXNzKGl0ZW1EaXYsIFwiaGlnaC1wcmlvXCIpO1xuICAgICAgYXBwZW5kQ2hpbGRUb1BhcmVudCh0YXNrSXRlbXMsIGl0ZW1EaXYpO1xuICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGFwcGVuZENoaWxkVG9QYXJlbnQoaXRlbURpdiwgZGl2KTtcbiAgICAgIGNvbnN0IGNoZWNrQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgY2hlY2tCb3guc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNoZWNrYm94XCIpO1xuICAgICAgY2hlY2tCb3guc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJjaGVja2JveFwiKTtcbiAgICAgIGNvbnN0IHRhc2tUaXRsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBhZGRDbGFzcyh0YXNrVGl0bGVEaXYsIFwidGFzay1oZWFkZXJcIik7XG4gICAgICBhZGRUZXh0VG9FbGVtZW50KHRhc2tUaXRsZURpdiwgYXJyYXlbaV0udGl0bGUpO1xuICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIGFkZENsYXNzKGRlbGV0ZUJ1dHRvbiwgXCJkZWxldGUtYnV0dG9uXCIpO1xuICAgICAgZGVsZXRlQnV0dG9uLmlubmVySFRNTCA9IFwiJnRpbWVzO1wiO1xuICAgICAgYXBwZW5kQ2hpbGRUb1BhcmVudChkaXYsIGNoZWNrQm94KTtcbiAgICAgIGFwcGVuZENoaWxkVG9QYXJlbnQoZGl2LCB0YXNrVGl0bGVEaXYpO1xuICAgICAgYXBwZW5kQ2hpbGRUb1BhcmVudChkaXYsIGRlbGV0ZUJ1dHRvbik7XG4gICAgICBjb25zdCB0aGluTGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBhZGRDbGFzcyh0aGluTGluZSwgXCJ0aGluLWxpbmVcIik7XG4gICAgICBhcHBlbmRDaGlsZFRvUGFyZW50KGl0ZW1EaXYsIHRoaW5MaW5lKTtcbiAgICAgIGNvbnN0IHRhc2tJbmZvRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGFkZENsYXNzKHRhc2tJbmZvRGl2LCBcInRhc2staW5mb1wiKTtcbiAgICAgIGFkZFRleHRUb0VsZW1lbnQodGFza0luZm9EaXYsIGFycmF5W2ldLmRlc2NyaXB0aW9uKTtcbiAgICAgIGFwcGVuZENoaWxkVG9QYXJlbnQoaXRlbURpdiwgdGFza0luZm9EaXYpO1xuICAgICAgY29uc3QgdGhpbkxpbmUxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGFkZENsYXNzKHRoaW5MaW5lMSwgXCJ0aGluLWxpbmVcIik7XG4gICAgICBhcHBlbmRDaGlsZFRvUGFyZW50KGl0ZW1EaXYsIHRoaW5MaW5lMSk7XG4gICAgICBjb25zdCB0YXNrU3RhdHVzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGFkZENsYXNzKHRhc2tTdGF0dXNEaXYsIFwidGFzay1zdGF0dXNcIik7XG4gICAgICBhcHBlbmRDaGlsZFRvUGFyZW50KGl0ZW1EaXYsIHRhc2tTdGF0dXNEaXYpO1xuICAgICAgY29uc3QgZGF0ZXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICBkYXRleS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiZGF0ZVwiKTtcbiAgICAgIGRhdGV5LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJkYXRlXCIpO1xuICAgICAgZGF0ZXkuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJkYXRlXCIpO1xuICAgICAgZGF0ZXkudmFsdWUgPSBhcnJheVtpXS5kdWVEYXRlO1xuICAgICAgYXBwZW5kQ2hpbGRUb1BhcmVudCh0YXNrU3RhdHVzRGl2LCBkYXRleSk7XG4gICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgaXRlbURpdi5yZW1vdmUoKTtcbiAgICAgICAgY29uc29sZS5sb2codGFza0FycmF5KTtcbiAgICAgICAgY29uc29sZS5sb2cobXlBcnJheSk7XG4gICAgICAgIHRhc2tBcnJheSA9IHRhc2tBcnJheS5maWx0ZXIoKHRvZG8pID0+IHtcbiAgICAgICAgICBpZiAodG9kby5pZCAhPT0gdGFza0FycmF5W2ldLmlkKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdG9yZWRUYXNrcygpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLCAoKSA9PiB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm15QXJyYXlcIiwgSlNPTi5zdHJpbmdpZnkodGFza0FycmF5KSk7XG4gICAgfSk7XG5cbiAgICBteUFycmF5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJteUFycmF5XCIpO1xuICAgIG15QXJyYXkgPSBKU09OLnBhcnNlKG15QXJyYXkpO1xuICAgIHJldHVybiBteUFycmF5O1xuICB9XG5cbiAgZnVuY3Rpb24gcHJpb0J1dHRvbnMoKSB7XG4gICAgbG93UHJpby5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcHJpb0J1dHRvbnNBY3RpdmVHcmVlbik7XG4gICAgbWVkaXVtUHJpby5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcHJpb0J1dHRvbnNBY3RpdmVZZWxsb3cpO1xuICAgIGhpZ2hQcmlvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwcmlvQnV0dG9uc0FjdGl2ZVJlZCk7XG4gIH1cblxuICBmdW5jdGlvbiBwcmlvQnV0dG9uc0FjdGl2ZUdyZWVuKCkge1xuICAgIGFkZENsYXNzKGxvd1ByaW8sIFwiYWN0aXZlXCIpO1xuICAgIHJlbW92ZUNsYXNzKG1lZGl1bVByaW8sIFwiYWN0aXZlXCIpO1xuICAgIHJlbW92ZUNsYXNzKGhpZ2hQcmlvLCBcImFjdGl2ZVwiKTtcbiAgICByZW1vdmVDbGFzcyhwcmlvRXJyb3IsIFwiYWN0aXZlXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJpb0J1dHRvbnNBY3RpdmVZZWxsb3coKSB7XG4gICAgYWRkQ2xhc3MobWVkaXVtUHJpbywgXCJhY3RpdmVcIik7XG4gICAgcmVtb3ZlQ2xhc3MobG93UHJpbywgXCJhY3RpdmVcIik7XG4gICAgcmVtb3ZlQ2xhc3MoaGlnaFByaW8sIFwiYWN0aXZlXCIpO1xuICAgIHJlbW92ZUNsYXNzKHByaW9FcnJvciwgXCJhY3RpdmVcIik7XG4gIH1cblxuICBmdW5jdGlvbiBwcmlvQnV0dG9uc0FjdGl2ZVJlZCgpIHtcbiAgICBhZGRDbGFzcyhoaWdoUHJpbywgXCJhY3RpdmVcIik7XG4gICAgcmVtb3ZlQ2xhc3MobWVkaXVtUHJpbywgXCJhY3RpdmVcIik7XG4gICAgcmVtb3ZlQ2xhc3MobG93UHJpbywgXCJhY3RpdmVcIik7XG4gICAgcmVtb3ZlQ2xhc3MocHJpb0Vycm9yLCBcImFjdGl2ZVwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9wZW5Gb3JtKCkge1xuICAgIHJlbW92ZUNsYXNzKGxvd1ByaW8sIFwiYWN0aXZlXCIpO1xuICAgIHJlbW92ZUNsYXNzKG1lZGl1bVByaW8sIFwiYWN0aXZlXCIpO1xuICAgIHJlbW92ZUNsYXNzKGhpZ2hQcmlvLCBcImFjdGl2ZVwiKTtcbiAgICByZW1vdmVDbGFzcyhwcmlvRXJyb3IsIFwiYWN0aXZlXCIpO1xuICAgIGNsZWFyRm9ybUlucHV0cyh0YXNrQWJvdXQsIFwiXCIpO1xuICAgIGNsZWFyRm9ybUlucHV0cyh0YXNrVGl0bGUsIFwiXCIpO1xuICAgIGNsZWFyRm9ybUlucHV0cyhkYXRlLCBcIlwiKTtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImRpdi5mb3JtXCIpO1xuICAgIGFkZENsYXNzKGZvcm0sIFwiYWN0aXZlXCIpO1xuICAgIGFkZENsYXNzKG92ZXJsYXksIFwiYWN0aXZlXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VGb3JtKCkge1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2LmZvcm1cIik7XG4gICAgcmVtb3ZlQ2xhc3MoZm9ybSwgXCJhY3RpdmVcIik7XG4gICAgcmVtb3ZlQ2xhc3Mob3ZlcmxheSwgXCJhY3RpdmVcIik7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRQcm9qZWN0Rm9ybSgpIHtcbiAgICBhZGRQcm9qZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUHJvamVjdEZvcm0pO1xuICAgIGNhbmNlbFByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlUHJvamVjdEZvcm0pO1xuICAgIGFkZFByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFkZFByb2plY3RUaXRsZSk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRQcm9qZWN0VGl0bGUoKSB7XG4gICAgaWYgKHByb2plY3RUaXRsZUlucHV0LnZhbHVlID09IFwiXCIpIHtcbiAgICAgIGFkZENsYXNzKHRpdGxlRXJyb3IsIFwiYWN0aXZlXCIpO1xuICAgICAgc2hvd0Vycm9yKHRpdGxlRXJyb3IsIFwiUGxlYXNlIGNob29zZSBhIHByb2plY3QgdGl0bGVcIik7XG4gICAgICBhZGRDbGFzcyhhZGRQcm9qZWN0LCBcImFjdGl2ZVwiKTtcbiAgICAgIGFkZENsYXNzKGNhbmNlbFByb2plY3QsIFwiYWN0aXZlXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhZGRDbGFzcyhwcm9qZWN0Rm9ybSwgXCJoaWRlXCIpO1xuICAgIHJlbW92ZUNsYXNzKGFkZFByb2plY3RCdXR0b24sIFwiaGlkZVwiKTtcbiAgICBjcmVhdGVQcm9qZWN0cygpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlUHJvamVjdHMoKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgIGNvbnN0IGNsb3NlSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgIGNsb3NlSW1hZ2Uuc3JjID0gXCJJbWFnZXMvY2xvc2UtY2lyY2xlLW91dGxpbmUuc3ZnXCI7XG4gICAgaW1hZ2Uuc3JjID0gXCJJbWFnZXMvZm9ybWF0LWxpc3QtY2hlY2tzLnN2Z1wiO1xuICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBhZGRUZXh0VG9FbGVtZW50KHNwYW4sIHByb2plY3RUaXRsZUlucHV0LnZhbHVlKTtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGFwcGVuZENoaWxkVG9QYXJlbnQoZGl2LCBpbWFnZSk7XG4gICAgYXBwZW5kQ2hpbGRUb1BhcmVudChkaXYsIHNwYW4pO1xuICAgIGFwcGVuZENoaWxkVG9QYXJlbnQoZGl2LCBjbG9zZUltYWdlKTtcbiAgICBhZGRDbGFzcyhkaXYsIFwiYS1wcm9qZWN0XCIpO1xuICAgIGFwcGVuZENoaWxkVG9QYXJlbnQoc2lkZUJhciwgZGl2KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb3NlUHJvamVjdEZvcm0oKSB7XG4gICAgYWRkQ2xhc3MocHJvamVjdEZvcm0sIFwiaGlkZVwiKTtcbiAgICByZW1vdmVDbGFzcyhhZGRQcm9qZWN0QnV0dG9uLCBcImhpZGVcIik7XG4gIH1cblxuICBmdW5jdGlvbiBvcGVuUHJvamVjdEZvcm0oKSB7XG4gICAgY2xlYXJGb3JtSW5wdXRzKHByb2plY3RUaXRsZUlucHV0LCBcIlwiKTtcbiAgICBhZGRDbGFzcyhhZGRQcm9qZWN0QnV0dG9uLCBcImhpZGVcIik7XG4gICAgcmVtb3ZlQ2xhc3MocHJvamVjdEZvcm0sIFwiaGlkZVwiKTtcbiAgICByZW1vdmVDbGFzcyhhZGRQcm9qZWN0LCBcImFjdGl2ZVwiKTtcbiAgICByZW1vdmVDbGFzcyhjYW5jZWxQcm9qZWN0LCBcImFjdGl2ZVwiKTtcbiAgICByZW1vdmVDbGFzcyh0aXRsZUVycm9yLCBcImFjdGl2ZVwiKTtcbiAgfVxuXG4gIC8vIFV0aWxpdHkgZnVuY3Rpb25zXG5cbiAgZnVuY3Rpb24gYWRkQ2xhc3MoZWxlbWVudCwgY2xhcykge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsZW1lbnQsIGNsYXMpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhcyk7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93RXJyb3IoZWxlbWVudCwgbWVzc2FnZSkge1xuICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJGb3JtSW5wdXRzKGVsZW1lbnQsIGNsZWFyKSB7XG4gICAgZWxlbWVudC52YWx1ZSA9IGNsZWFyO1xuICB9XG5cbiAgZnVuY3Rpb24gYXBwZW5kQ2hpbGRUb1BhcmVudChwYXJlbnQsIGNoaWxkKSB7XG4gICAgcGFyZW50LmFwcGVuZChjaGlsZCk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRUZXh0VG9FbGVtZW50KGVsZW1lbnQsIHRleHQpIHtcbiAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnRzQnlDbGFzcyhjbGFzc05hbWUpIHtcbiAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKTtcbiAgICB3aGlsZSAoZWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgZWxlbWVudHNbMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50c1swXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBsb2FkSG9tZVBhZ2UsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBVSSB9O1xuIiwiaW1wb3J0IHsgVUkgfSBmcm9tIFwiLi9Nb2R1bGVzL3BvcC11cC1mb3JtXCI7XG5VSS5sb2FkSG9tZVBhZ2UoKTtcbiJdLCJuYW1lcyI6WyJ0YXNrIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsImlzRG9uZSIsInRhc2tBcnJheSIsIkFycmF5IiwibXlBcnJheSIsImFkZFRhc2tCdXR0b24iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2FuY2VsQnV0dG9uIiwicXVlcnlTZWxlY3RvciIsInN1Ym1pdEJ1dHRvbiIsIm92ZXJsYXkiLCJsb3dQcmlvIiwibWVkaXVtUHJpbyIsImhpZ2hQcmlvIiwicHJpb0Vycm9yIiwidGFza1RpdGxlIiwidGFza0Fib3V0IiwiZGF0ZSIsImFkZFByb2plY3RCdXR0b24iLCJhZGRQcm9qZWN0IiwiY2FuY2VsUHJvamVjdCIsInByb2plY3RGb3JtIiwicHJvamVjdFRpdGxlSW5wdXQiLCJzaWRlQmFyIiwidGl0bGVFcnJvciIsImRpc3BsYXlUYXNrcyIsImFycmF5IiwidGFza0l0ZW1zIiwiaSIsImxlbmd0aCIsImlkIiwiaXRlbURpdiIsImNyZWF0ZUVsZW1lbnQiLCJhZGRDbGFzcyIsImFwcGVuZENoaWxkVG9QYXJlbnQiLCJkaXYiLCJjaGVja0JveCIsInNldEF0dHJpYnV0ZSIsInRhc2tUaXRsZURpdiIsImFkZFRleHRUb0VsZW1lbnQiLCJkZWxldGVCdXR0b24iLCJpbm5lckhUTUwiLCJ0aGluTGluZSIsInRhc2tJbmZvRGl2IiwidGhpbkxpbmUxIiwidGFza1N0YXR1c0RpdiIsImRhdGV5IiwidmFsdWUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwiY29uc29sZSIsImxvZyIsImZpbHRlciIsInRvZG8iLCJwcmlvQnV0dG9uc0FjdGl2ZUdyZWVuIiwicmVtb3ZlQ2xhc3MiLCJwcmlvQnV0dG9uc0FjdGl2ZVllbGxvdyIsInByaW9CdXR0b25zQWN0aXZlUmVkIiwib3BlbkZvcm0iLCJjbGVhckZvcm1JbnB1dHMiLCJjbG9zZUZvcm0iLCJhZGRQcm9qZWN0VGl0bGUiLCJzaG93RXJyb3IiLCJpbWFnZSIsImNsb3NlSW1hZ2UiLCJzcmMiLCJzcGFuIiwiY3JlYXRlUHJvamVjdHMiLCJjbG9zZVByb2plY3RGb3JtIiwib3BlblByb2plY3RGb3JtIiwiZWxlbWVudCIsImNsYXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJtZXNzYWdlIiwidGV4dENvbnRlbnQiLCJjbGVhciIsInBhcmVudCIsImNoaWxkIiwiYXBwZW5kIiwidGV4dCIsImxvYWRIb21lUGFnZSIsImNsYXNzTmFtZSIsImVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInJlbW92ZUVsZW1lbnRzQnlDbGFzcyIsImFsZXJ0IiwiY29udGFpbnMiLCJwdXNoIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRJdGVtIiwicGFyc2UiXSwic291cmNlUm9vdCI6IiJ9