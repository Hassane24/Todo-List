(()=>{"use strict";function e(e,t,c,n,o=!1){return{title:e,description:t,dueDate:c,priority:n,isDone:o}}const t=(()=>{let t=new Array,c=new Array;const n=document.getElementById("add-button"),o=document.querySelector(".cancel-button"),i=document.querySelector(".submit"),a=document.getElementById("overlay"),r=document.querySelector(".low"),d=document.querySelector(".medium"),u=document.querySelector(".high"),l=document.querySelector("span.error"),s=document.querySelector("[data-title]"),m=document.querySelector("[data-about]"),v=document.getElementById("due-date"),y=document.querySelector(".add-project-button"),E=document.querySelector("#add-project"),f=document.querySelector("#cancel-project"),h=document.querySelector(".projects"),p=document.getElementById("project"),g=document.querySelector(".sidebar"),L=document.querySelector(".title-error");function S(e){const n=document.querySelector(".task-items");for(let o=0;o<e.length;o++){e[o].id="task"+o;const i=document.createElement("div");x(i,"item"),"low"==e[o].priority&&x(i,"low-prio"),"medium"==e[o].priority&&x(i,"mid-prio"),"high"==e[o].priority&&x(i,"high-prio"),H(n,i);const a=document.createElement("div");H(i,a);const r=document.createElement("input");r.setAttribute("type","checkbox"),r.setAttribute("id","checkbox");const d=document.createElement("div");x(d,"task-header"),O(d,e[o].title);const u=document.createElement("button");x(u,"delete-button"),u.innerHTML="&times;",H(a,r),H(a,d),H(a,u);const l=document.createElement("div");x(l,"thin-line"),H(i,l);const s=document.createElement("div");x(s,"task-info"),O(s,e[o].description),H(i,s);const m=document.createElement("div");x(m,"thin-line"),H(i,m);const v=document.createElement("div");x(v,"task-status"),H(i,v);const y=document.createElement("input");y.setAttribute("type","date"),y.setAttribute("name","date"),y.setAttribute("id","date"),y.value=e[o].dueDate,H(v,y),u.addEventListener("click",(()=>{i.remove(),console.log(t),console.log(c),t=t.filter((e=>{if(e.id!==t[o].id)return!0}))}))}}function k(){window.addEventListener("beforeunload",(()=>{localStorage.setItem("myArray",JSON.stringify(t))}));let e=localStorage.getItem("myArray");return e=JSON.parse(e),c=c.concat(e),c}function q(){x(r,"active"),D(d,"active"),D(u,"active"),D(l,"active")}function b(){x(d,"active"),D(r,"active"),D(u,"active"),D(l,"active")}function A(){x(u,"active"),D(d,"active"),D(r,"active"),D(l,"active")}function w(){D(r,"active"),D(d,"active"),D(u,"active"),D(l,"active"),P(m,""),P(s,""),P(v,""),x(document.querySelector("div.form"),"active"),x(a,"active")}function I(){D(document.querySelector("div.form"),"active"),D(a,"active")}function j(){if(""==p.value)return x(L,"active"),N(L,"Please choose a project title"),x(E,"active"),void x(f,"active");x(h,"hide"),D(y,"hide"),function(){const e=document.createElement("img"),t=document.createElement("img");t.src="Images/close-circle-outline.svg",e.src="Images/format-list-checks.svg";const c=document.createElement("span");O(c,p.value);const n=document.createElement("div");H(n,e),H(n,c),H(n,t),x(n,"a-project"),H(g,n)}()}function B(){x(h,"hide"),D(y,"hide")}function C(){P(p,""),x(y,"hide"),D(h,"hide"),D(E,"active"),D(f,"active"),D(L,"active")}function x(e,t){e.classList.add(t)}function D(e,t){e.classList.remove(t)}function N(e,t){e.textContent=t}function P(e,t){e.value=t}function H(e,t){e.append(t)}function O(e,t){e.textContent=t}return{loadHomePage:function(){n.addEventListener("click",w),a.addEventListener("click",I),o.addEventListener("click",I),i.addEventListener("click",(()=>(console.log(t),console.log(c),function(e){const t=document.getElementsByClassName("item");for(;t.length>0;)t[0].parentNode.removeChild(t[0])}(),""==s.value||""==v.value?alert("Task Title is empty or you havent chose the due date"):r.classList.contains("active")||d.classList.contains("active")||u.classList.contains("active")?r.classList.contains("active")?(t.push(e(s.value,m.value,v.value,"low")),I(),S(t)):d.classList.contains("active")?(t.push(e(s.value,m.value,v.value,"medium")),I(),S(t)):u.classList.contains("active")?(t.push(e(s.value,m.value,v.value,"high")),I(),S(t)):void 0:(x(l,"active"),N(l,"Please choose a priority"))))),y.addEventListener("click",C),f.addEventListener("click",B),E.addEventListener("click",j),r.addEventListener("click",q),d.addEventListener("click",b),u.addEventListener("click",A),console.log(t),console.log(k()),S(t),k()}}})();document.addEventListener("DOMContentLoaded",t.loadHomePage)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBVzZCLGlCQUFpQixRQUFTdUIsR0FoRHJDNUQsRUFBUXFDLGlCQUFpQixRQUFTZ0IsR0FDbENwRCxFQUFXb0MsaUJBQWlCLFFBQVNrQixHQUNyQ3JELEVBQVNtQyxpQkFBaUIsUUFBU21CLEdBakluQ2pCLFFBQVFDLElBQUlsRCxHQUNaaUQsUUFBUUMsSUFBSUcsS0FDWjdCLEVBQWF4QixHQUNicUQsT0E5Qk8sR0NEWGpELFNBQVMyQyxpQkFBaUIsbUJBQW9CaEQsRUFBRzJGLGUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvTW9kdWxlcy9UYXNrLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9Nb2R1bGVzL3BvcC11cC1mb3JtLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiB0YXNrKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIGlzRG9uZSA9IGZhbHNlKSB7XG4gIHJldHVybiB7XG4gICAgdGl0bGUsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgZHVlRGF0ZSxcbiAgICBwcmlvcml0eSxcbiAgICBpc0RvbmUsXG4gIH07XG59XG5cbmV4cG9ydCB7IHRhc2sgfTtcbiIsImltcG9ydCB7IHRhc2sgfSBmcm9tIFwiLi9UYXNrXCI7XG5cbmNvbnN0IFVJID0gKCgpID0+IHtcbiAgbGV0IHRhc2tBcnJheSA9IG5ldyBBcnJheSgpO1xuICBsZXQgbXlBcnJheSA9IG5ldyBBcnJheSgpO1xuICBjb25zdCBhZGRUYXNrQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtYnV0dG9uXCIpO1xuICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbmNlbC1idXR0b25cIik7XG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3VibWl0XCIpO1xuICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvdmVybGF5XCIpO1xuICBjb25zdCBsb3dQcmlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb3dcIik7XG4gIGNvbnN0IG1lZGl1bVByaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lZGl1bVwiKTtcbiAgY29uc3QgaGlnaFByaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhpZ2hcIik7XG4gIGNvbnN0IHByaW9FcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuLmVycm9yXCIpO1xuICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtdGl0bGVdXCIpO1xuICBjb25zdCB0YXNrQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtYWJvdXRdXCIpO1xuICBjb25zdCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkdWUtZGF0ZVwiKTtcbiAgY29uc3QgYWRkUHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXByb2plY3QtYnV0dG9uXCIpO1xuICBjb25zdCBhZGRQcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtcHJvamVjdFwiKTtcbiAgY29uc3QgY2FuY2VsUHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FuY2VsLXByb2plY3RcIik7XG4gIGNvbnN0IHByb2plY3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0c1wiKTtcbiAgY29uc3QgcHJvamVjdFRpdGxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RcIik7XG4gIGNvbnN0IHNpZGVCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXJcIik7XG4gIGNvbnN0IHRpdGxlRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRpdGxlLWVycm9yXCIpO1xuXG4gIGZ1bmN0aW9uIGxvYWRIb21lUGFnZSgpIHtcbiAgICBhZGRUYXNrKCk7XG4gICAgY2xvc2VUYXNrRm9ybSgpO1xuICAgIGFkZFByb2plY3RGb3JtKCk7XG4gICAgcHJpb0J1dHRvbnMoKTtcbiAgICBjb25zb2xlLmxvZyh0YXNrQXJyYXkpO1xuICAgIGNvbnNvbGUubG9nKHN0b3JlZFRhc2tzKCkpO1xuICAgIGRpc3BsYXlUYXNrcyh0YXNrQXJyYXkpO1xuICAgIHN0b3JlZFRhc2tzKCk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRUYXNrKCkge1xuICAgIGFkZFRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Gb3JtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb3NlVGFza0Zvcm0oKSB7XG4gICAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VGb3JtKTtcbiAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlRm9ybSk7XG4gICAgc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyh0YXNrQXJyYXkpO1xuICAgICAgY29uc29sZS5sb2cobXlBcnJheSk7XG4gICAgICAvLyBpZiAoIXRhc2tBcnJheS5sZW5ndGgpIHRhc2tBcnJheSA9IHRhc2tBcnJheS5jb25jYXQobXlBcnJheSk7XG4gICAgICAvL3JlbW92aW5nIGVsZW1lbnRzIHNvIHRoZXkgZG9udCBkdXBsaWNhdGVcbiAgICAgIHJlbW92ZUVsZW1lbnRzQnlDbGFzcyhcIml0ZW1cIik7XG5cbiAgICAgIC8vICAgICBJbnB1dCBFcnJvclxuXG4gICAgICBpZiAodGFza1RpdGxlLnZhbHVlID09IFwiXCIgfHwgZGF0ZS52YWx1ZSA9PSBcIlwiKVxuICAgICAgICByZXR1cm4gYWxlcnQoXCJUYXNrIFRpdGxlIGlzIGVtcHR5IG9yIHlvdSBoYXZlbnQgY2hvc2UgdGhlIGR1ZSBkYXRlXCIpO1xuXG4gICAgICAvLyAgICAgUHJpb3JpdHkgRXJyb3JcblxuICAgICAgaWYgKFxuICAgICAgICAhbG93UHJpby5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikgJiZcbiAgICAgICAgIW1lZGl1bVByaW8uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpICYmXG4gICAgICAgICFoaWdoUHJpby5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIilcbiAgICAgICkge1xuICAgICAgICBhZGRDbGFzcyhwcmlvRXJyb3IsIFwiYWN0aXZlXCIpO1xuICAgICAgICByZXR1cm4gc2hvd0Vycm9yKHByaW9FcnJvciwgXCJQbGVhc2UgY2hvb3NlIGEgcHJpb3JpdHlcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChsb3dQcmlvLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xuICAgICAgICB0YXNrQXJyYXkucHVzaChcbiAgICAgICAgICB0YXNrKHRhc2tUaXRsZS52YWx1ZSwgdGFza0Fib3V0LnZhbHVlLCBkYXRlLnZhbHVlLCBcImxvd1wiKVxuICAgICAgICApO1xuICAgICAgICBjbG9zZUZvcm0oKTtcbiAgICAgICAgcmV0dXJuIGRpc3BsYXlUYXNrcyh0YXNrQXJyYXkpO1xuICAgICAgfVxuXG4gICAgICBpZiAobWVkaXVtUHJpby5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcbiAgICAgICAgdGFza0FycmF5LnB1c2goXG4gICAgICAgICAgdGFzayh0YXNrVGl0bGUudmFsdWUsIHRhc2tBYm91dC52YWx1ZSwgZGF0ZS52YWx1ZSwgXCJtZWRpdW1cIilcbiAgICAgICAgKTtcbiAgICAgICAgY2xvc2VGb3JtKCk7XG4gICAgICAgIHJldHVybiBkaXNwbGF5VGFza3ModGFza0FycmF5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGhpZ2hQcmlvLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xuICAgICAgICB0YXNrQXJyYXkucHVzaChcbiAgICAgICAgICB0YXNrKHRhc2tUaXRsZS52YWx1ZSwgdGFza0Fib3V0LnZhbHVlLCBkYXRlLnZhbHVlLCBcImhpZ2hcIilcbiAgICAgICAgKTtcbiAgICAgICAgY2xvc2VGb3JtKCk7XG4gICAgICAgIHJldHVybiBkaXNwbGF5VGFza3ModGFza0FycmF5KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc3BsYXlUYXNrcyhhcnJheSkge1xuICAgIGNvbnN0IHRhc2tJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1pdGVtc1wiKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBhcnJheVtpXS5pZCA9IFwidGFza1wiICsgaTtcbiAgICAgIGNvbnN0IGl0ZW1EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgYWRkQ2xhc3MoaXRlbURpdiwgXCJpdGVtXCIpO1xuICAgICAgaWYgKGFycmF5W2ldLnByaW9yaXR5ID09IFwibG93XCIpIGFkZENsYXNzKGl0ZW1EaXYsIFwibG93LXByaW9cIik7XG4gICAgICBpZiAoYXJyYXlbaV0ucHJpb3JpdHkgPT0gXCJtZWRpdW1cIikgYWRkQ2xhc3MoaXRlbURpdiwgXCJtaWQtcHJpb1wiKTtcbiAgICAgIGlmIChhcnJheVtpXS5wcmlvcml0eSA9PSBcImhpZ2hcIikgYWRkQ2xhc3MoaXRlbURpdiwgXCJoaWdoLXByaW9cIik7XG4gICAgICBhcHBlbmRDaGlsZFRvUGFyZW50KHRhc2tJdGVtcywgaXRlbURpdik7XG4gICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgYXBwZW5kQ2hpbGRUb1BhcmVudChpdGVtRGl2LCBkaXYpO1xuICAgICAgY29uc3QgY2hlY2tCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICBjaGVja0JveC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XG4gICAgICBjaGVja0JveC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImNoZWNrYm94XCIpO1xuICAgICAgY29uc3QgdGFza1RpdGxlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGFkZENsYXNzKHRhc2tUaXRsZURpdiwgXCJ0YXNrLWhlYWRlclwiKTtcbiAgICAgIGFkZFRleHRUb0VsZW1lbnQodGFza1RpdGxlRGl2LCBhcnJheVtpXS50aXRsZSk7XG4gICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgYWRkQ2xhc3MoZGVsZXRlQnV0dG9uLCBcImRlbGV0ZS1idXR0b25cIik7XG4gICAgICBkZWxldGVCdXR0b24uaW5uZXJIVE1MID0gXCImdGltZXM7XCI7XG4gICAgICBhcHBlbmRDaGlsZFRvUGFyZW50KGRpdiwgY2hlY2tCb3gpO1xuICAgICAgYXBwZW5kQ2hpbGRUb1BhcmVudChkaXYsIHRhc2tUaXRsZURpdik7XG4gICAgICBhcHBlbmRDaGlsZFRvUGFyZW50KGRpdiwgZGVsZXRlQnV0dG9uKTtcbiAgICAgIGNvbnN0IHRoaW5MaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGFkZENsYXNzKHRoaW5MaW5lLCBcInRoaW4tbGluZVwiKTtcbiAgICAgIGFwcGVuZENoaWxkVG9QYXJlbnQoaXRlbURpdiwgdGhpbkxpbmUpO1xuICAgICAgY29uc3QgdGFza0luZm9EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgYWRkQ2xhc3ModGFza0luZm9EaXYsIFwidGFzay1pbmZvXCIpO1xuICAgICAgYWRkVGV4dFRvRWxlbWVudCh0YXNrSW5mb0RpdiwgYXJyYXlbaV0uZGVzY3JpcHRpb24pO1xuICAgICAgYXBwZW5kQ2hpbGRUb1BhcmVudChpdGVtRGl2LCB0YXNrSW5mb0Rpdik7XG4gICAgICBjb25zdCB0aGluTGluZTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgYWRkQ2xhc3ModGhpbkxpbmUxLCBcInRoaW4tbGluZVwiKTtcbiAgICAgIGFwcGVuZENoaWxkVG9QYXJlbnQoaXRlbURpdiwgdGhpbkxpbmUxKTtcbiAgICAgIGNvbnN0IHRhc2tTdGF0dXNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgYWRkQ2xhc3ModGFza1N0YXR1c0RpdiwgXCJ0YXNrLXN0YXR1c1wiKTtcbiAgICAgIGFwcGVuZENoaWxkVG9QYXJlbnQoaXRlbURpdiwgdGFza1N0YXR1c0Rpdik7XG4gICAgICBjb25zdCBkYXRleSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgIGRhdGV5LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJkYXRlXCIpO1xuICAgICAgZGF0ZXkuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcImRhdGVcIik7XG4gICAgICBkYXRleS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImRhdGVcIik7XG4gICAgICBkYXRleS52YWx1ZSA9IGFycmF5W2ldLmR1ZURhdGU7XG4gICAgICBhcHBlbmRDaGlsZFRvUGFyZW50KHRhc2tTdGF0dXNEaXYsIGRhdGV5KTtcbiAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBpdGVtRGl2LnJlbW92ZSgpO1xuICAgICAgICBjb25zb2xlLmxvZyh0YXNrQXJyYXkpO1xuICAgICAgICBjb25zb2xlLmxvZyhteUFycmF5KTtcbiAgICAgICAgdGFza0FycmF5ID0gdGFza0FycmF5LmZpbHRlcigodG9kbykgPT4ge1xuICAgICAgICAgIGlmICh0b2RvLmlkICE9PSB0YXNrQXJyYXlbaV0uaWQpIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3JlZFRhc2tzKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsICgpID0+IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibXlBcnJheVwiLCBKU09OLnN0cmluZ2lmeSh0YXNrQXJyYXkpKTtcbiAgICB9KTtcbiAgICBsZXQgdGVtcEFycmF5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJteUFycmF5XCIpO1xuICAgIHRlbXBBcnJheSA9IEpTT04ucGFyc2UodGVtcEFycmF5KTtcbiAgICBteUFycmF5ID0gbXlBcnJheS5jb25jYXQodGVtcEFycmF5KTtcbiAgICByZXR1cm4gbXlBcnJheTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByaW9CdXR0b25zKCkge1xuICAgIGxvd1ByaW8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHByaW9CdXR0b25zQWN0aXZlR3JlZW4pO1xuICAgIG1lZGl1bVByaW8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHByaW9CdXR0b25zQWN0aXZlWWVsbG93KTtcbiAgICBoaWdoUHJpby5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcHJpb0J1dHRvbnNBY3RpdmVSZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJpb0J1dHRvbnNBY3RpdmVHcmVlbigpIHtcbiAgICBhZGRDbGFzcyhsb3dQcmlvLCBcImFjdGl2ZVwiKTtcbiAgICByZW1vdmVDbGFzcyhtZWRpdW1QcmlvLCBcImFjdGl2ZVwiKTtcbiAgICByZW1vdmVDbGFzcyhoaWdoUHJpbywgXCJhY3RpdmVcIik7XG4gICAgcmVtb3ZlQ2xhc3MocHJpb0Vycm9yLCBcImFjdGl2ZVwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByaW9CdXR0b25zQWN0aXZlWWVsbG93KCkge1xuICAgIGFkZENsYXNzKG1lZGl1bVByaW8sIFwiYWN0aXZlXCIpO1xuICAgIHJlbW92ZUNsYXNzKGxvd1ByaW8sIFwiYWN0aXZlXCIpO1xuICAgIHJlbW92ZUNsYXNzKGhpZ2hQcmlvLCBcImFjdGl2ZVwiKTtcbiAgICByZW1vdmVDbGFzcyhwcmlvRXJyb3IsIFwiYWN0aXZlXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJpb0J1dHRvbnNBY3RpdmVSZWQoKSB7XG4gICAgYWRkQ2xhc3MoaGlnaFByaW8sIFwiYWN0aXZlXCIpO1xuICAgIHJlbW92ZUNsYXNzKG1lZGl1bVByaW8sIFwiYWN0aXZlXCIpO1xuICAgIHJlbW92ZUNsYXNzKGxvd1ByaW8sIFwiYWN0aXZlXCIpO1xuICAgIHJlbW92ZUNsYXNzKHByaW9FcnJvciwgXCJhY3RpdmVcIik7XG4gIH1cblxuICBmdW5jdGlvbiBvcGVuRm9ybSgpIHtcbiAgICByZW1vdmVDbGFzcyhsb3dQcmlvLCBcImFjdGl2ZVwiKTtcbiAgICByZW1vdmVDbGFzcyhtZWRpdW1QcmlvLCBcImFjdGl2ZVwiKTtcbiAgICByZW1vdmVDbGFzcyhoaWdoUHJpbywgXCJhY3RpdmVcIik7XG4gICAgcmVtb3ZlQ2xhc3MocHJpb0Vycm9yLCBcImFjdGl2ZVwiKTtcbiAgICBjbGVhckZvcm1JbnB1dHModGFza0Fib3V0LCBcIlwiKTtcbiAgICBjbGVhckZvcm1JbnB1dHModGFza1RpdGxlLCBcIlwiKTtcbiAgICBjbGVhckZvcm1JbnB1dHMoZGF0ZSwgXCJcIik7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYuZm9ybVwiKTtcbiAgICBhZGRDbGFzcyhmb3JtLCBcImFjdGl2ZVwiKTtcbiAgICBhZGRDbGFzcyhvdmVybGF5LCBcImFjdGl2ZVwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb3NlRm9ybSgpIHtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImRpdi5mb3JtXCIpO1xuICAgIHJlbW92ZUNsYXNzKGZvcm0sIFwiYWN0aXZlXCIpO1xuICAgIHJlbW92ZUNsYXNzKG92ZXJsYXksIFwiYWN0aXZlXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkUHJvamVjdEZvcm0oKSB7XG4gICAgYWRkUHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblByb2plY3RGb3JtKTtcbiAgICBjYW5jZWxQcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZVByb2plY3RGb3JtKTtcbiAgICBhZGRQcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhZGRQcm9qZWN0VGl0bGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkUHJvamVjdFRpdGxlKCkge1xuICAgIGlmIChwcm9qZWN0VGl0bGVJbnB1dC52YWx1ZSA9PSBcIlwiKSB7XG4gICAgICBhZGRDbGFzcyh0aXRsZUVycm9yLCBcImFjdGl2ZVwiKTtcbiAgICAgIHNob3dFcnJvcih0aXRsZUVycm9yLCBcIlBsZWFzZSBjaG9vc2UgYSBwcm9qZWN0IHRpdGxlXCIpO1xuICAgICAgYWRkQ2xhc3MoYWRkUHJvamVjdCwgXCJhY3RpdmVcIik7XG4gICAgICBhZGRDbGFzcyhjYW5jZWxQcm9qZWN0LCBcImFjdGl2ZVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWRkQ2xhc3MocHJvamVjdEZvcm0sIFwiaGlkZVwiKTtcbiAgICByZW1vdmVDbGFzcyhhZGRQcm9qZWN0QnV0dG9uLCBcImhpZGVcIik7XG4gICAgY3JlYXRlUHJvamVjdHMoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVByb2plY3RzKCkge1xuICAgIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBjb25zdCBjbG9zZUltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBjbG9zZUltYWdlLnNyYyA9IFwiSW1hZ2VzL2Nsb3NlLWNpcmNsZS1vdXRsaW5lLnN2Z1wiO1xuICAgIGltYWdlLnNyYyA9IFwiSW1hZ2VzL2Zvcm1hdC1saXN0LWNoZWNrcy5zdmdcIjtcbiAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgYWRkVGV4dFRvRWxlbWVudChzcGFuLCBwcm9qZWN0VGl0bGVJbnB1dC52YWx1ZSk7XG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBhcHBlbmRDaGlsZFRvUGFyZW50KGRpdiwgaW1hZ2UpO1xuICAgIGFwcGVuZENoaWxkVG9QYXJlbnQoZGl2LCBzcGFuKTtcbiAgICBhcHBlbmRDaGlsZFRvUGFyZW50KGRpdiwgY2xvc2VJbWFnZSk7XG4gICAgYWRkQ2xhc3MoZGl2LCBcImEtcHJvamVjdFwiKTtcbiAgICBhcHBlbmRDaGlsZFRvUGFyZW50KHNpZGVCYXIsIGRpdik7XG4gIH1cblxuICBmdW5jdGlvbiBjbG9zZVByb2plY3RGb3JtKCkge1xuICAgIGFkZENsYXNzKHByb2plY3RGb3JtLCBcImhpZGVcIik7XG4gICAgcmVtb3ZlQ2xhc3MoYWRkUHJvamVjdEJ1dHRvbiwgXCJoaWRlXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gb3BlblByb2plY3RGb3JtKCkge1xuICAgIGNsZWFyRm9ybUlucHV0cyhwcm9qZWN0VGl0bGVJbnB1dCwgXCJcIik7XG4gICAgYWRkQ2xhc3MoYWRkUHJvamVjdEJ1dHRvbiwgXCJoaWRlXCIpO1xuICAgIHJlbW92ZUNsYXNzKHByb2plY3RGb3JtLCBcImhpZGVcIik7XG4gICAgcmVtb3ZlQ2xhc3MoYWRkUHJvamVjdCwgXCJhY3RpdmVcIik7XG4gICAgcmVtb3ZlQ2xhc3MoY2FuY2VsUHJvamVjdCwgXCJhY3RpdmVcIik7XG4gICAgcmVtb3ZlQ2xhc3ModGl0bGVFcnJvciwgXCJhY3RpdmVcIik7XG4gIH1cblxuICAvLyBVdGlsaXR5IGZ1bmN0aW9uc1xuXG4gIGZ1bmN0aW9uIGFkZENsYXNzKGVsZW1lbnQsIGNsYXMpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhcyk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVDbGFzcyhlbGVtZW50LCBjbGFzKSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd0Vycm9yKGVsZW1lbnQsIG1lc3NhZ2UpIHtcbiAgICBlbGVtZW50LnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyRm9ybUlucHV0cyhlbGVtZW50LCBjbGVhcikge1xuICAgIGVsZW1lbnQudmFsdWUgPSBjbGVhcjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFwcGVuZENoaWxkVG9QYXJlbnQocGFyZW50LCBjaGlsZCkge1xuICAgIHBhcmVudC5hcHBlbmQoY2hpbGQpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkVGV4dFRvRWxlbWVudChlbGVtZW50LCB0ZXh0KSB7XG4gICAgZWxlbWVudC50ZXh0Q29udGVudCA9IHRleHQ7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVFbGVtZW50c0J5Q2xhc3MoY2xhc3NOYW1lKSB7XG4gICAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSk7XG4gICAgd2hpbGUgKGVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGVsZW1lbnRzWzBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudHNbMF0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbG9hZEhvbWVQYWdlLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IHsgVUkgfTtcbiIsImltcG9ydCB7IFVJIH0gZnJvbSBcIi4vTW9kdWxlcy9wb3AtdXAtZm9ybVwiO1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgVUkubG9hZEhvbWVQYWdlKTtcbiJdLCJuYW1lcyI6WyJ0YXNrIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsImlzRG9uZSIsIlVJIiwidGFza0FycmF5IiwiQXJyYXkiLCJteUFycmF5IiwiYWRkVGFza0J1dHRvbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjYW5jZWxCdXR0b24iLCJxdWVyeVNlbGVjdG9yIiwic3VibWl0QnV0dG9uIiwib3ZlcmxheSIsImxvd1ByaW8iLCJtZWRpdW1QcmlvIiwiaGlnaFByaW8iLCJwcmlvRXJyb3IiLCJ0YXNrVGl0bGUiLCJ0YXNrQWJvdXQiLCJkYXRlIiwiYWRkUHJvamVjdEJ1dHRvbiIsImFkZFByb2plY3QiLCJjYW5jZWxQcm9qZWN0IiwicHJvamVjdEZvcm0iLCJwcm9qZWN0VGl0bGVJbnB1dCIsInNpZGVCYXIiLCJ0aXRsZUVycm9yIiwiZGlzcGxheVRhc2tzIiwiYXJyYXkiLCJ0YXNrSXRlbXMiLCJpIiwibGVuZ3RoIiwiaWQiLCJpdGVtRGl2IiwiY3JlYXRlRWxlbWVudCIsImFkZENsYXNzIiwiYXBwZW5kQ2hpbGRUb1BhcmVudCIsImRpdiIsImNoZWNrQm94Iiwic2V0QXR0cmlidXRlIiwidGFza1RpdGxlRGl2IiwiYWRkVGV4dFRvRWxlbWVudCIsImRlbGV0ZUJ1dHRvbiIsImlubmVySFRNTCIsInRoaW5MaW5lIiwidGFza0luZm9EaXYiLCJ0aGluTGluZTEiLCJ0YXNrU3RhdHVzRGl2IiwiZGF0ZXkiLCJ2YWx1ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJjb25zb2xlIiwibG9nIiwiZmlsdGVyIiwidG9kbyIsInN0b3JlZFRhc2tzIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0ZW1wQXJyYXkiLCJnZXRJdGVtIiwicGFyc2UiLCJjb25jYXQiLCJwcmlvQnV0dG9uc0FjdGl2ZUdyZWVuIiwicmVtb3ZlQ2xhc3MiLCJwcmlvQnV0dG9uc0FjdGl2ZVllbGxvdyIsInByaW9CdXR0b25zQWN0aXZlUmVkIiwib3BlbkZvcm0iLCJjbGVhckZvcm1JbnB1dHMiLCJjbG9zZUZvcm0iLCJhZGRQcm9qZWN0VGl0bGUiLCJzaG93RXJyb3IiLCJpbWFnZSIsImNsb3NlSW1hZ2UiLCJzcmMiLCJzcGFuIiwiY3JlYXRlUHJvamVjdHMiLCJjbG9zZVByb2plY3RGb3JtIiwib3BlblByb2plY3RGb3JtIiwiZWxlbWVudCIsImNsYXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJtZXNzYWdlIiwidGV4dENvbnRlbnQiLCJjbGVhciIsInBhcmVudCIsImNoaWxkIiwiYXBwZW5kIiwidGV4dCIsImxvYWRIb21lUGFnZSIsImNsYXNzTmFtZSIsImVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInJlbW92ZUVsZW1lbnRzQnlDbGFzcyIsImFsZXJ0IiwiY29udGFpbnMiLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIifQ==