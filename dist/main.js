(()=>{"use strict";function e(e,t,c,n,o=!1){return{title:e,description:t,dueDate:c,priority:n,isDone:o}}const t=(()=>{let t=[{projectName:"default",tasks:[],isOn:!0}],c=[];const n=document.getElementById("add-button"),o=document.querySelector(".cancel-button"),i=document.querySelector(".submit"),a=document.getElementById("overlay"),s=document.querySelector(".low"),r=document.querySelector(".medium"),d=document.querySelector(".high"),l=document.querySelector("span.error"),u=document.querySelector("[data-title]"),m=document.querySelector("[data-about]"),v=document.getElementById("due-date"),y=document.querySelector(".add-project-button"),h=document.querySelector("#add-project"),p=document.querySelector("#cancel-project"),E=document.querySelector(".projects"),k=document.getElementById("project"),f=document.querySelector(".sidebar"),g=document.querySelector(".title-error");function L(e){const c=document.querySelector(".task-items");for(let n=0;n<e.length;n++){e[n].id="task"+n;const o=document.createElement("div");O(o,"item"),"low"==e[n].priority&&O(o,"low-prio"),"medium"==e[n].priority&&O(o,"mid-prio"),"high"==e[n].priority&&O(o,"high-prio"),P(c,o);const i=document.createElement("div");P(o,i);const a=document.createElement("input");a.setAttribute("type","checkbox"),a.setAttribute("id","checkbox");const s=document.createElement("div");O(s,"task-header"),H(s,e[n].title);const r=document.createElement("button");O(r,"delete-button"),r.innerHTML="&times;",P(i,a),P(i,s),P(i,r);const d=document.createElement("div");O(d,"thin-line"),P(o,d);const l=document.createElement("div");O(l,"task-info"),H(l,e[n].description),P(o,l);const u=document.createElement("div");O(u,"thin-line"),P(o,u);const m=document.createElement("div");O(m,"task-status"),P(o,m);const v=document.createElement("input");v.setAttribute("type","date"),v.setAttribute("name","date"),v.setAttribute("id","date"),v.value=e[n].dueDate,P(m,v),r.addEventListener("click",(()=>{o.remove(),t[0].tasks=t[0].tasks.filter((t=>t.id!==e[n].id)),S(t)}))}}function S(e){localStorage.setItem("myArray",JSON.stringify(e))}function q(){O(s,"active"),B([r,d,l],"active")}function b(){O(r,"active"),B([s,d,l],"active")}function A(){O(d,"active"),B([r,s,l],"active")}function j(){B([s,r,d,l],"active"),D([m,u,v],"");const e=document.querySelector("div.form");O([e,a],"active")}function I(){const e=document.querySelector("div.form");B([e,a],"active")}function C(){if(console.log(t),""==k.value)return O([g,p,h],"active"),void w(g,"Please choose a project title");O(E,"hide"),B(y,"hide"),function(){const e=document.createElement("img"),c=document.createElement("img");c.src="Images/close-circle-outline.svg",e.src="Images/format-list-checks.svg";const n=document.createElement("span");H(n,k.value);const o=document.createElement("div");P(o,e),P(o,n),P(o,c),O(o,"a-project"),P(f,o),n.addEventListener("click",(()=>{if(!t.some((e=>e.projectName===n.textContent))){const e={projectName:n.textContent,tasks:[],isOn:!1};t.push(e)}t.forEach((e=>e.isOn=!1)),t.find((e=>e.projectName===n.textContent)).isOn=!0,console.log(t)}))}()}function N(){O(E,"hide"),B(y,"hide"),B(g,"active")}function x(){D(k,""),O(y,"hide"),B([E,h,p,g],"hide")}const O=(e,t)=>Array.isArray(e)?e.forEach((e=>e.classList.add(t))):e.classList.add(t),B=(e,t)=>Array.isArray(e)?e.forEach((e=>e.classList.remove(t))):e.classList.remove(t),w=(e,t)=>e.textContent=t,D=e=>Array.isArray(e)?e.forEach((e=>e.value="")):e.value="",P=(e,t)=>e.append(t),H=(e,t)=>e.textContent=t;return{loadHomePage:function(){n.addEventListener("click",j),a.addEventListener("click",I),o.addEventListener("click",I),i.addEventListener("click",(()=>(function(e){const t=document.getElementsByClassName("item");for(;t.length>0;)t[0].parentNode.removeChild(t[0])}(),""==u.value||""==v.value?alert("Task Title is empty or you havent chose the due date"):s.classList.contains("active")||r.classList.contains("active")||d.classList.contains("active")?s.classList.contains("active")?(t[0].tasks.push(e(u.value,m.value,v.value,"low")),I(),L(t[0].tasks),S(t)):r.classList.contains("active")?(t[0].tasks.push(e(u.value,m.value,v.value,"medium")),I(),L(t[0].tasks),S(t)):d.classList.contains("active")?(t[0].tasks.push(e(u.value,m.value,v.value,"high")),I(),L(t[0].tasks),S(t)):void 0:(O(l,"active"),w(l,"Please choose a priority"))))),y.addEventListener("click",x),p.addEventListener("click",N),h.addEventListener("click",C),s.addEventListener("click",q),r.addEventListener("click",b),d.addEventListener("click",A),localStorage.getItem("myArray")&&(c=localStorage.getItem("myArray"),c=JSON.parse(c),console.log(c),console.log(t),t=[...t],t[0].tasks=[...c[0].tasks||[]]),L(t[0].tasks)}}})();document.addEventListener("DOMContentLoaded",t.loadHomePage)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWExQixFQUFVLEdBQUdFLE9BQ25CbUQsRUFBV3JELElBR2hCYyxFQUFTMkUsVUFBVWEsU0FBUyxXQUM5QnRHLEVBQVUsR0FBR0UsTUFBTTRFLEtBQ2pCckYsRUFBS3VCLEVBQVVnQyxNQUFPL0IsRUFBVStCLE1BQU85QixFQUFLOEIsTUFBTyxTQUVyRGlCLElBQ0F2QyxFQUFhMUIsRUFBVSxHQUFHRSxPQUNuQm1ELEVBQVdyRCxTQU5wQixHQXRCRWtDLEVBQVNuQixFQUFXLFVBQ2JzRCxFQUFVdEQsRUFBVyxnQ0FxSWhDSSxFQUFpQjhCLGlCQUFpQixRQUFTa0MsR0FDM0M5RCxFQUFjNEIsaUJBQWlCLFFBQVNpQyxHQUN4QzlELEVBQVc2QixpQkFBaUIsUUFBU2lCLEdBbkNyQ3RELEVBQVFxQyxpQkFBaUIsUUFBU1MsR0FDbEM3QyxFQUFXb0MsaUJBQWlCLFFBQVNXLEdBQ3JDOUMsRUFBU21DLGlCQUFpQixRQUFTWSxHQVo5QlAsYUFBYWlELFFBQVEsYUFDMUJuRyxFQUFVa0QsYUFBYWlELFFBQVEsV0FDL0JuRyxFQUFVb0QsS0FBS2dELE1BQU1wRyxHQUNyQitELFFBQVFDLElBQUloRSxHQUNaK0QsUUFBUUMsSUFBSXBFLEdBQ1pBLEVBQVksSUFBSUEsR0FDaEJBLEVBQVUsR0FBR0UsTUFBUSxJQUFLRSxFQUFRLEdBQUdGLE9BQVMsS0EzSDlDd0IsRUFBYTFCLEVBQVUsR0FBR0UsVUE3Qm5CLEdDRFhJLFNBQVMyQyxpQkFBaUIsbUJBQW9CbEQsRUFBR2lHLGUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvTW9kdWxlcy9UYXNrLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9Nb2R1bGVzL3BvcC11cC1mb3JtLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiB0YXNrKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIGlzRG9uZSA9IGZhbHNlKSB7XG4gIHJldHVybiB7XG4gICAgdGl0bGUsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgZHVlRGF0ZSxcbiAgICBwcmlvcml0eSxcbiAgICBpc0RvbmUsXG4gIH07XG59XG5cbmV4cG9ydCB7IHRhc2sgfTtcbiIsImltcG9ydCB7IHRhc2sgfSBmcm9tIFwiLi9UYXNrXCI7XG5cbmNvbnN0IFVJID0gKCgpID0+IHtcbiAgbGV0IHRhc2tBcnJheSA9IFt7IHByb2plY3ROYW1lOiBcImRlZmF1bHRcIiwgdGFza3M6IFtdLCBpc09uOiB0cnVlIH1dO1xuICBsZXQgbXlBcnJheSA9IFtdO1xuICAvLyBDYWNoaW5nIFRoZSBET01cbiAgY29uc3QgYWRkVGFza0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLWJ1dHRvblwiKTtcbiAgY29uc3QgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYW5jZWwtYnV0dG9uXCIpO1xuICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN1Ym1pdFwiKTtcbiAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3ZlcmxheVwiKTtcbiAgY29uc3QgbG93UHJpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG93XCIpO1xuICBjb25zdCBtZWRpdW1QcmlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZWRpdW1cIik7XG4gIGNvbnN0IGhpZ2hQcmlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oaWdoXCIpO1xuICBjb25zdCBwcmlvRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwic3Bhbi5lcnJvclwiKTtcbiAgY29uc3QgdGFza1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLXRpdGxlXVwiKTtcbiAgY29uc3QgdGFza0Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLWFib3V0XVwiKTtcbiAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHVlLWRhdGVcIik7XG4gIGNvbnN0IGFkZFByb2plY3RCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1wcm9qZWN0LWJ1dHRvblwiKTtcbiAgY29uc3QgYWRkUHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLXByb2plY3RcIik7XG4gIGNvbnN0IGNhbmNlbFByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhbmNlbC1wcm9qZWN0XCIpO1xuICBjb25zdCBwcm9qZWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNcIik7XG4gIGNvbnN0IHByb2plY3RUaXRsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0XCIpO1xuICBjb25zdCBzaWRlQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaWRlYmFyXCIpO1xuICBjb25zdCB0aXRsZUVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50aXRsZS1lcnJvclwiKTtcblxuICBmdW5jdGlvbiBsb2FkSG9tZVBhZ2UoKSB7XG4gICAgYWRkVGFzaygpO1xuICAgIGNsb3NlVGFza0Zvcm0oKTtcbiAgICBhZGRQcm9qZWN0Rm9ybSgpO1xuICAgIHByaW9CdXR0b25zKCk7XG4gICAgZ2V0VGFza3MoKTtcbiAgICBkaXNwbGF5VGFza3ModGFza0FycmF5WzBdLnRhc2tzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFRhc2soKSB7XG4gICAgYWRkVGFza0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkZvcm0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VUYXNrRm9ybSgpIHtcbiAgICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZUZvcm0pO1xuICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VGb3JtKTtcbiAgICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIC8vcmVtb3ZpbmcgZWxlbWVudHMgc28gdGhleSBkb250IGR1cGxpY2F0ZVxuICAgICAgcmVtb3ZlRWxlbWVudHNCeUNsYXNzKFwiaXRlbVwiKTtcblxuICAgICAgLy8gICAgIElucHV0IEVycm9yXG5cbiAgICAgIGlmICh0YXNrVGl0bGUudmFsdWUgPT0gXCJcIiB8fCBkYXRlLnZhbHVlID09IFwiXCIpXG4gICAgICAgIHJldHVybiBhbGVydChcIlRhc2sgVGl0bGUgaXMgZW1wdHkgb3IgeW91IGhhdmVudCBjaG9zZSB0aGUgZHVlIGRhdGVcIik7XG5cbiAgICAgIC8vICAgICBQcmlvcml0eSBFcnJvclxuXG4gICAgICBpZiAoXG4gICAgICAgICFsb3dQcmlvLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSAmJlxuICAgICAgICAhbWVkaXVtUHJpby5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikgJiZcbiAgICAgICAgIWhpZ2hQcmlvLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKVxuICAgICAgKSB7XG4gICAgICAgIGFkZENsYXNzKHByaW9FcnJvciwgXCJhY3RpdmVcIik7XG4gICAgICAgIHJldHVybiBzaG93RXJyb3IocHJpb0Vycm9yLCBcIlBsZWFzZSBjaG9vc2UgYSBwcmlvcml0eVwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGxvd1ByaW8uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XG4gICAgICAgIHRhc2tBcnJheVswXS50YXNrcy5wdXNoKFxuICAgICAgICAgIHRhc2sodGFza1RpdGxlLnZhbHVlLCB0YXNrQWJvdXQudmFsdWUsIGRhdGUudmFsdWUsIFwibG93XCIpXG4gICAgICAgICk7XG4gICAgICAgIGNsb3NlRm9ybSgpO1xuICAgICAgICBkaXNwbGF5VGFza3ModGFza0FycmF5WzBdLnRhc2tzKTtcbiAgICAgICAgcmV0dXJuIHN0b3JlVGFza3ModGFza0FycmF5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGl1bVByaW8uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XG4gICAgICAgIHRhc2tBcnJheVswXS50YXNrcy5wdXNoKFxuICAgICAgICAgIHRhc2sodGFza1RpdGxlLnZhbHVlLCB0YXNrQWJvdXQudmFsdWUsIGRhdGUudmFsdWUsIFwibWVkaXVtXCIpXG4gICAgICAgICk7XG4gICAgICAgIGNsb3NlRm9ybSgpO1xuICAgICAgICBkaXNwbGF5VGFza3ModGFza0FycmF5WzBdLnRhc2tzKTtcbiAgICAgICAgcmV0dXJuIHN0b3JlVGFza3ModGFza0FycmF5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGhpZ2hQcmlvLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xuICAgICAgICB0YXNrQXJyYXlbMF0udGFza3MucHVzaChcbiAgICAgICAgICB0YXNrKHRhc2tUaXRsZS52YWx1ZSwgdGFza0Fib3V0LnZhbHVlLCBkYXRlLnZhbHVlLCBcImhpZ2hcIilcbiAgICAgICAgKTtcbiAgICAgICAgY2xvc2VGb3JtKCk7XG4gICAgICAgIGRpc3BsYXlUYXNrcyh0YXNrQXJyYXlbMF0udGFza3MpO1xuICAgICAgICByZXR1cm4gc3RvcmVUYXNrcyh0YXNrQXJyYXkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzcGxheVRhc2tzKGFycmF5KSB7XG4gICAgY29uc3QgdGFza0l0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWl0ZW1zXCIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFycmF5W2ldLmlkID0gXCJ0YXNrXCIgKyBpO1xuICAgICAgY29uc3QgaXRlbURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBhZGRDbGFzcyhpdGVtRGl2LCBcIml0ZW1cIik7XG4gICAgICBpZiAoYXJyYXlbaV0ucHJpb3JpdHkgPT0gXCJsb3dcIikgYWRkQ2xhc3MoaXRlbURpdiwgXCJsb3ctcHJpb1wiKTtcbiAgICAgIGlmIChhcnJheVtpXS5wcmlvcml0eSA9PSBcIm1lZGl1bVwiKSBhZGRDbGFzcyhpdGVtRGl2LCBcIm1pZC1wcmlvXCIpO1xuICAgICAgaWYgKGFycmF5W2ldLnByaW9yaXR5ID09IFwiaGlnaFwiKSBhZGRDbGFzcyhpdGVtRGl2LCBcImhpZ2gtcHJpb1wiKTtcbiAgICAgIGFwcGVuZENoaWxkVG9QYXJlbnQodGFza0l0ZW1zLCBpdGVtRGl2KTtcbiAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBhcHBlbmRDaGlsZFRvUGFyZW50KGl0ZW1EaXYsIGRpdik7XG4gICAgICBjb25zdCBjaGVja0JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgIGNoZWNrQm94LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcbiAgICAgIGNoZWNrQm94LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY2hlY2tib3hcIik7XG4gICAgICBjb25zdCB0YXNrVGl0bGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgYWRkQ2xhc3ModGFza1RpdGxlRGl2LCBcInRhc2staGVhZGVyXCIpO1xuICAgICAgYWRkVGV4dFRvRWxlbWVudCh0YXNrVGl0bGVEaXYsIGFycmF5W2ldLnRpdGxlKTtcbiAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICBhZGRDbGFzcyhkZWxldGVCdXR0b24sIFwiZGVsZXRlLWJ1dHRvblwiKTtcbiAgICAgIGRlbGV0ZUJ1dHRvbi5pbm5lckhUTUwgPSBcIiZ0aW1lcztcIjtcbiAgICAgIGFwcGVuZENoaWxkVG9QYXJlbnQoZGl2LCBjaGVja0JveCk7XG4gICAgICBhcHBlbmRDaGlsZFRvUGFyZW50KGRpdiwgdGFza1RpdGxlRGl2KTtcbiAgICAgIGFwcGVuZENoaWxkVG9QYXJlbnQoZGl2LCBkZWxldGVCdXR0b24pO1xuICAgICAgY29uc3QgdGhpbkxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgYWRkQ2xhc3ModGhpbkxpbmUsIFwidGhpbi1saW5lXCIpO1xuICAgICAgYXBwZW5kQ2hpbGRUb1BhcmVudChpdGVtRGl2LCB0aGluTGluZSk7XG4gICAgICBjb25zdCB0YXNrSW5mb0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBhZGRDbGFzcyh0YXNrSW5mb0RpdiwgXCJ0YXNrLWluZm9cIik7XG4gICAgICBhZGRUZXh0VG9FbGVtZW50KHRhc2tJbmZvRGl2LCBhcnJheVtpXS5kZXNjcmlwdGlvbik7XG4gICAgICBhcHBlbmRDaGlsZFRvUGFyZW50KGl0ZW1EaXYsIHRhc2tJbmZvRGl2KTtcbiAgICAgIGNvbnN0IHRoaW5MaW5lMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBhZGRDbGFzcyh0aGluTGluZTEsIFwidGhpbi1saW5lXCIpO1xuICAgICAgYXBwZW5kQ2hpbGRUb1BhcmVudChpdGVtRGl2LCB0aGluTGluZTEpO1xuICAgICAgY29uc3QgdGFza1N0YXR1c0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBhZGRDbGFzcyh0YXNrU3RhdHVzRGl2LCBcInRhc2stc3RhdHVzXCIpO1xuICAgICAgYXBwZW5kQ2hpbGRUb1BhcmVudChpdGVtRGl2LCB0YXNrU3RhdHVzRGl2KTtcbiAgICAgIGNvbnN0IGRhdGV5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgZGF0ZXkuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XG4gICAgICBkYXRleS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwiZGF0ZVwiKTtcbiAgICAgIGRhdGV5LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZGF0ZVwiKTtcbiAgICAgIGRhdGV5LnZhbHVlID0gYXJyYXlbaV0uZHVlRGF0ZTtcbiAgICAgIGFwcGVuZENoaWxkVG9QYXJlbnQodGFza1N0YXR1c0RpdiwgZGF0ZXkpO1xuICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGl0ZW1EaXYucmVtb3ZlKCk7XG4gICAgICAgIHRhc2tBcnJheVswXS50YXNrcyA9IHRhc2tBcnJheVswXS50YXNrcy5maWx0ZXIoKHRvZG8pID0+XG4gICAgICAgICAgdG9kby5pZCAhPT0gYXJyYXlbaV0uaWQgPyB0cnVlIDogZmFsc2VcbiAgICAgICAgKTtcbiAgICAgICAgc3RvcmVUYXNrcyh0YXNrQXJyYXkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RvcmVUYXNrcyhhcnJheSkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibXlBcnJheVwiLCBKU09OLnN0cmluZ2lmeShhcnJheSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VGFza3MoKSB7XG4gICAgaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm15QXJyYXlcIikpIHJldHVybjtcbiAgICBteUFycmF5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJteUFycmF5XCIpO1xuICAgIG15QXJyYXkgPSBKU09OLnBhcnNlKG15QXJyYXkpO1xuICAgIGNvbnNvbGUubG9nKG15QXJyYXkpO1xuICAgIGNvbnNvbGUubG9nKHRhc2tBcnJheSk7XG4gICAgdGFza0FycmF5ID0gWy4uLnRhc2tBcnJheV07XG4gICAgdGFza0FycmF5WzBdLnRhc2tzID0gWy4uLihteUFycmF5WzBdLnRhc2tzIHx8IFtdKV07XG4gIH1cblxuICBmdW5jdGlvbiBwcmlvQnV0dG9ucygpIHtcbiAgICBsb3dQcmlvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwcmlvQnV0dG9uc0FjdGl2ZUdyZWVuKTtcbiAgICBtZWRpdW1QcmlvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwcmlvQnV0dG9uc0FjdGl2ZVllbGxvdyk7XG4gICAgaGlnaFByaW8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHByaW9CdXR0b25zQWN0aXZlUmVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByaW9CdXR0b25zQWN0aXZlR3JlZW4oKSB7XG4gICAgYWRkQ2xhc3MobG93UHJpbywgXCJhY3RpdmVcIik7XG4gICAgcmVtb3ZlQ2xhc3MoW21lZGl1bVByaW8sIGhpZ2hQcmlvLCBwcmlvRXJyb3JdLCBcImFjdGl2ZVwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByaW9CdXR0b25zQWN0aXZlWWVsbG93KCkge1xuICAgIGFkZENsYXNzKG1lZGl1bVByaW8sIFwiYWN0aXZlXCIpO1xuICAgIHJlbW92ZUNsYXNzKFtsb3dQcmlvLCBoaWdoUHJpbywgcHJpb0Vycm9yXSwgXCJhY3RpdmVcIik7XG4gIH1cblxuICBmdW5jdGlvbiBwcmlvQnV0dG9uc0FjdGl2ZVJlZCgpIHtcbiAgICBhZGRDbGFzcyhoaWdoUHJpbywgXCJhY3RpdmVcIik7XG4gICAgcmVtb3ZlQ2xhc3MoW21lZGl1bVByaW8sIGxvd1ByaW8sIHByaW9FcnJvcl0sIFwiYWN0aXZlXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gb3BlbkZvcm0oKSB7XG4gICAgcmVtb3ZlQ2xhc3MoW2xvd1ByaW8sIG1lZGl1bVByaW8sIGhpZ2hQcmlvLCBwcmlvRXJyb3JdLCBcImFjdGl2ZVwiKTtcbiAgICBjbGVhckZvcm1JbnB1dHMoW3Rhc2tBYm91dCwgdGFza1RpdGxlLCBkYXRlXSwgXCJcIik7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYuZm9ybVwiKTtcbiAgICBhZGRDbGFzcyhbZm9ybSwgb3ZlcmxheV0sIFwiYWN0aXZlXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VGb3JtKCkge1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2LmZvcm1cIik7XG4gICAgcmVtb3ZlQ2xhc3MoW2Zvcm0sIG92ZXJsYXldLCBcImFjdGl2ZVwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFByb2plY3RGb3JtKCkge1xuICAgIGFkZFByb2plY3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qcm9qZWN0Rm9ybSk7XG4gICAgY2FuY2VsUHJvamVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VQcm9qZWN0Rm9ybSk7XG4gICAgYWRkUHJvamVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYWRkUHJvamVjdFRpdGxlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFByb2plY3RUaXRsZSgpIHtcbiAgICBjb25zb2xlLmxvZyh0YXNrQXJyYXkpO1xuICAgIGlmIChwcm9qZWN0VGl0bGVJbnB1dC52YWx1ZSA9PSBcIlwiKSB7XG4gICAgICBhZGRDbGFzcyhbdGl0bGVFcnJvciwgY2FuY2VsUHJvamVjdCwgYWRkUHJvamVjdF0sIFwiYWN0aXZlXCIpO1xuICAgICAgc2hvd0Vycm9yKHRpdGxlRXJyb3IsIFwiUGxlYXNlIGNob29zZSBhIHByb2plY3QgdGl0bGVcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGFkZENsYXNzKHByb2plY3RGb3JtLCBcImhpZGVcIik7XG4gICAgcmVtb3ZlQ2xhc3MoYWRkUHJvamVjdEJ1dHRvbiwgXCJoaWRlXCIpO1xuICAgIGNyZWF0ZVByb2plY3RzKCk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0cygpIHtcbiAgICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgY29uc3QgY2xvc2VJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgY2xvc2VJbWFnZS5zcmMgPSBcIkltYWdlcy9jbG9zZS1jaXJjbGUtb3V0bGluZS5zdmdcIjtcbiAgICBpbWFnZS5zcmMgPSBcIkltYWdlcy9mb3JtYXQtbGlzdC1jaGVja3Muc3ZnXCI7XG4gICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIGFkZFRleHRUb0VsZW1lbnQoc3BhbiwgcHJvamVjdFRpdGxlSW5wdXQudmFsdWUpO1xuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgYXBwZW5kQ2hpbGRUb1BhcmVudChkaXYsIGltYWdlKTtcbiAgICBhcHBlbmRDaGlsZFRvUGFyZW50KGRpdiwgc3Bhbik7XG4gICAgYXBwZW5kQ2hpbGRUb1BhcmVudChkaXYsIGNsb3NlSW1hZ2UpO1xuICAgIGFkZENsYXNzKGRpdiwgXCJhLXByb2plY3RcIik7XG4gICAgYXBwZW5kQ2hpbGRUb1BhcmVudChzaWRlQmFyLCBkaXYpO1xuICAgIHNwYW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIXRhc2tBcnJheS5zb21lKChwcm9qZWN0KSA9PiBwcm9qZWN0LnByb2plY3ROYW1lID09PSBzcGFuLnRleHRDb250ZW50KVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RPYmplY3QgPSB7XG4gICAgICAgICAgcHJvamVjdE5hbWU6IHNwYW4udGV4dENvbnRlbnQsXG4gICAgICAgICAgdGFza3M6IFtdLFxuICAgICAgICAgIGlzT246IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICB0YXNrQXJyYXkucHVzaChwcm9qZWN0T2JqZWN0KTtcbiAgICAgIH1cblxuICAgICAgdGFza0FycmF5LmZvckVhY2goKHByb2plY3QpID0+IChwcm9qZWN0LmlzT24gPSBmYWxzZSkpO1xuICAgICAgdGFza0FycmF5LmZpbmQoXG4gICAgICAgIChwcm9qZWN0KSA9PiBwcm9qZWN0LnByb2plY3ROYW1lID09PSBzcGFuLnRleHRDb250ZW50XG4gICAgICApLmlzT24gPSB0cnVlO1xuICAgICAgY29uc29sZS5sb2codGFza0FycmF5KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb3NlUHJvamVjdEZvcm0oKSB7XG4gICAgYWRkQ2xhc3MocHJvamVjdEZvcm0sIFwiaGlkZVwiKTtcbiAgICByZW1vdmVDbGFzcyhhZGRQcm9qZWN0QnV0dG9uLCBcImhpZGVcIik7XG4gICAgcmVtb3ZlQ2xhc3ModGl0bGVFcnJvciwgXCJhY3RpdmVcIik7XG4gIH1cblxuICBmdW5jdGlvbiBvcGVuUHJvamVjdEZvcm0oKSB7XG4gICAgY2xlYXJGb3JtSW5wdXRzKHByb2plY3RUaXRsZUlucHV0LCBcIlwiKTtcbiAgICBhZGRDbGFzcyhhZGRQcm9qZWN0QnV0dG9uLCBcImhpZGVcIik7XG4gICAgcmVtb3ZlQ2xhc3MoW3Byb2plY3RGb3JtLCBhZGRQcm9qZWN0LCBjYW5jZWxQcm9qZWN0LCB0aXRsZUVycm9yXSwgXCJoaWRlXCIpO1xuICB9XG5cbiAgLy8gVXRpbGl0eSBmdW5jdGlvbnNcblxuICBjb25zdCBhZGRDbGFzcyA9IChlbGVtZW50cywgY2xhc3NOYW1lKSA9PlxuICAgIEFycmF5LmlzQXJyYXkoZWxlbWVudHMpXG4gICAgICA/IGVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpKVxuICAgICAgOiBlbGVtZW50cy5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG5cbiAgY29uc3QgcmVtb3ZlQ2xhc3MgPSAoZWxlbWVudHMsIGNsYXNzTmFtZSkgPT5cbiAgICBBcnJheS5pc0FycmF5KGVsZW1lbnRzKVxuICAgICAgPyBlbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKSlcbiAgICAgIDogZWxlbWVudHMuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuXG4gIGNvbnN0IHNob3dFcnJvciA9IChlbGVtZW50LCBtZXNzYWdlKSA9PiAoZWxlbWVudC50ZXh0Q29udGVudCA9IG1lc3NhZ2UpO1xuXG4gIGNvbnN0IGNsZWFyRm9ybUlucHV0cyA9IChlbGVtZW50cykgPT5cbiAgICBBcnJheS5pc0FycmF5KGVsZW1lbnRzKVxuICAgICAgPyBlbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiAoZWxlbWVudC52YWx1ZSA9IFwiXCIpKVxuICAgICAgOiAoZWxlbWVudHMudmFsdWUgPSBcIlwiKTtcblxuICBjb25zdCBhcHBlbmRDaGlsZFRvUGFyZW50ID0gKHBhcmVudCwgY2hpbGQpID0+IHBhcmVudC5hcHBlbmQoY2hpbGQpO1xuXG4gIGNvbnN0IGFkZFRleHRUb0VsZW1lbnQgPSAoZWxlbWVudCwgdGV4dCkgPT4gKGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0KTtcblxuICBmdW5jdGlvbiByZW1vdmVFbGVtZW50c0J5Q2xhc3MoY2xhc3NOYW1lKSB7XG4gICAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSk7XG4gICAgd2hpbGUgKGVsZW1lbnRzLmxlbmd0aCA+IDApIGVsZW1lbnRzWzBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudHNbMF0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBsb2FkSG9tZVBhZ2UsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBVSSB9O1xuIiwiaW1wb3J0IHsgVUkgfSBmcm9tIFwiLi9Nb2R1bGVzL3BvcC11cC1mb3JtXCI7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBVSS5sb2FkSG9tZVBhZ2UpO1xuIl0sIm5hbWVzIjpbInRhc2siLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwiaXNEb25lIiwiVUkiLCJ0YXNrQXJyYXkiLCJwcm9qZWN0TmFtZSIsInRhc2tzIiwiaXNPbiIsIm15QXJyYXkiLCJhZGRUYXNrQnV0dG9uIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNhbmNlbEJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJzdWJtaXRCdXR0b24iLCJvdmVybGF5IiwibG93UHJpbyIsIm1lZGl1bVByaW8iLCJoaWdoUHJpbyIsInByaW9FcnJvciIsInRhc2tUaXRsZSIsInRhc2tBYm91dCIsImRhdGUiLCJhZGRQcm9qZWN0QnV0dG9uIiwiYWRkUHJvamVjdCIsImNhbmNlbFByb2plY3QiLCJwcm9qZWN0Rm9ybSIsInByb2plY3RUaXRsZUlucHV0Iiwic2lkZUJhciIsInRpdGxlRXJyb3IiLCJkaXNwbGF5VGFza3MiLCJhcnJheSIsInRhc2tJdGVtcyIsImkiLCJsZW5ndGgiLCJpZCIsIml0ZW1EaXYiLCJjcmVhdGVFbGVtZW50IiwiYWRkQ2xhc3MiLCJhcHBlbmRDaGlsZFRvUGFyZW50IiwiZGl2IiwiY2hlY2tCb3giLCJzZXRBdHRyaWJ1dGUiLCJ0YXNrVGl0bGVEaXYiLCJhZGRUZXh0VG9FbGVtZW50IiwiZGVsZXRlQnV0dG9uIiwiaW5uZXJIVE1MIiwidGhpbkxpbmUiLCJ0YXNrSW5mb0RpdiIsInRoaW5MaW5lMSIsInRhc2tTdGF0dXNEaXYiLCJkYXRleSIsInZhbHVlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsImZpbHRlciIsInRvZG8iLCJzdG9yZVRhc2tzIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcmlvQnV0dG9uc0FjdGl2ZUdyZWVuIiwicmVtb3ZlQ2xhc3MiLCJwcmlvQnV0dG9uc0FjdGl2ZVllbGxvdyIsInByaW9CdXR0b25zQWN0aXZlUmVkIiwib3BlbkZvcm0iLCJjbGVhckZvcm1JbnB1dHMiLCJmb3JtIiwiY2xvc2VGb3JtIiwiYWRkUHJvamVjdFRpdGxlIiwiY29uc29sZSIsImxvZyIsInNob3dFcnJvciIsImltYWdlIiwiY2xvc2VJbWFnZSIsInNyYyIsInNwYW4iLCJzb21lIiwicHJvamVjdCIsInRleHRDb250ZW50IiwicHJvamVjdE9iamVjdCIsInB1c2giLCJmb3JFYWNoIiwiZmluZCIsImNyZWF0ZVByb2plY3RzIiwiY2xvc2VQcm9qZWN0Rm9ybSIsIm9wZW5Qcm9qZWN0Rm9ybSIsImVsZW1lbnRzIiwiY2xhc3NOYW1lIiwiQXJyYXkiLCJpc0FycmF5IiwiZWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsIm1lc3NhZ2UiLCJwYXJlbnQiLCJjaGlsZCIsImFwcGVuZCIsInRleHQiLCJsb2FkSG9tZVBhZ2UiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwicmVtb3ZlRWxlbWVudHNCeUNsYXNzIiwiYWxlcnQiLCJjb250YWlucyIsImdldEl0ZW0iLCJwYXJzZSJdLCJzb3VyY2VSb290IjoiIn0=